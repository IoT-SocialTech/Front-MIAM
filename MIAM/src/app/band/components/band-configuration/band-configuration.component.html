<div class="band-config-container">
  <div class="container-padding">
    <h2>Band Configuration</h2>
  </div>

  <div class="main-container-row">
    <div *ngIf="isLoading" class="loading-spinner">
      <mat-spinner class="custom-spinner" diameter="30"></mat-spinner>      
    </div>

    <ul class="band-patients-list" *ngIf="patients.length > 0">
      <li class="patient" *ngFor="let patient of patients" (click)="selectPatient(patient)">
        <p>ID: {{ patient.patient.id }}</p>
        <p>Patient: {{ patient.patient.name }} {{ patient.patient.lastName }} </p>
      </li>
    </ul>

    <div class="patient-band-configuration" *ngIf="selectedPatient">
      <div class="patient-data" *ngIf="selectedPatientIsLoaded">
        <div class="info-section">
          <div class="section-column">
            <p>ID: {{ selectedPatient.patient.id }}</p>
            <p>Battery: 80%</p>
          </div>
          <div class="section-column">
            <p>Status: Synchronized </p>
            <div class="section-row">
              <p>Last Sync: 2024-09-18 18:05</p>
              <p> Sync now</p>
            </div>
          </div>
        </div>

        <hr>

        <div class="patient-section">
          <h3>Patient</h3>
          <div class="section-row">
            <p style="font-weight: bold;">Name:</p>
            <p> {{ selectedPatient.patient.name }} {{ selectedPatient.patient.lastName }}</p>
          </div>
        </div>

        <hr>

        <div class="caregiver-section">
          <h3>Caregiver</h3>
          <div class="section-row">
            <p style="font-weight: bold;">Assigned to:</p>
            <p> {{selectedPatient.caregiver.name}}</p>
          </div>
          <div class="section-row">
            <p style="font-weight: bold;">Alerts:</p>
            <div class="alerts">
              <mat-checkbox class="caregiver-temperature-checkbox">
                <span>Alert if temperature is higher than</span>
                <mat-form-field appearance="fill" style="width: 80px;">
                  <input matInput type="number" placeholder="°C" />
                </mat-form-field>
                <span>°C </span>
              </mat-checkbox>

              <mat-checkbox class="caregiver-pulse-checkbox">
                <span>Alert if pulse is higher than</span>
                <mat-form-field appearance="fill" style="width: 60px;">
                  <input matInput type="number" placeholder="bpm" />
                </mat-form-field>
                <span>bpm</span>
              </mat-checkbox>

              <mat-checkbox class="caregiver-fall-checkbox">
                Alert me if fall risk is high
              </mat-checkbox>
            </div>  
          </div>
        </div>

        <hr>

        <div class="relative-section">
          <h3>Relative</h3>
          <div class="section-row">
            <p style="font-weight: bold;">Related to:</p>
            <div class="section-row">
              <p> {{selectedPatient.patient.relative.name}} {{selectedPatient.patient.relative.lastName}} </p>
            </div>
          </div>
          <!-- Alertas del relative eliminadas como me pediste -->
        </div>

        <hr>

        <div class="buttons-section">
          <div class="section-row">
            <a mat-fab extended routerLink=".">
              <mat-icon>delete</mat-icon>
              Reset band
            </a>
            <p>Resetting this band will unlink all patient data.</p>
          </div>
          <button type="submit" class="save-button" (click)="save()"> Save </button>
        </div>
      </div>
    </div>
  </div>

</div>
